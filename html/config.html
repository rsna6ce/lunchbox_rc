<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Microcontroller Parameter Setting</title>
</head>
<body>
    <div>
        <label>pwm_percent_L1:</label>
        <input type="number" id="pwm_percent_L1" min="0" max="100" value="{{pwm_percent_L1}}">
        <button onclick="sendParam('pwm_percent_L1')">Set</button>
    </div>
    <div>
        <label>pwm_percent_R1:</label>
        <input type="number" id="pwm_percent_R1" min="0" max="100" value="{{pwm_percent_R1}}">
        <button onclick="sendParam('pwm_percent_R1')">Set</button>
    </div>
    <div>
        <label>pwm_percent_L2:</label>
        <input type="number" id="pwm_percent_L2" min="0" max="100" value="{{pwm_percent_L2}}">
        <button onclick="sendParam('pwm_percent_L2')">Set</button>
    </div>
    <div>
        <label>pwm_percent_R2:</label>
        <input type="number" id="pwm_percent_R2" min="0" max="100" value="{{pwm_percent_R2}}">
        <button onclick="sendParam('pwm_percent_R2')">Set</button>
    </div>
    <div>
        <label>pwm_percent_L3:</label>
        <input type="number" id="pwm_percent_L3" min="0" max="100" value="{{pwm_percent_L3}}">
        <button onclick="sendParam('pwm_percent_L3')">Set</button>
    </div>
    <div>
        <label>pwm_percent_R3:</label>
        <input type="number" id="pwm_percent_R3" min="0" max="100" value="{{pwm_percent_R3}}">
        <button onclick="sendParam('pwm_percent_R3')">Set</button>
    </div>
    <div>
        <label>turn_percent_rate_I1:</label>
        <input type="number" id="turn_percent_rate_I1" min="0" max="100" value="{{turn_percent_rate_I1}}">
        <button onclick="sendParam('turn_percent_rate_I1')">Set</button>
    </div>
    <div>
        <label>turn_percent_rate_O1:</label>
        <input type="number" id="turn_percent_rate_O1" min="0" max="100" value="{{turn_percent_rate_O1}}">
        <button onclick="sendParam('turn_percent_rate_O1')">Set</button>
    </div>
    <div>
        <label>turn_percent_rate_I2:</label>
        <input type="number" id="turn_percent_rate_I2" min="0" max="100" value="{{turn_percent_rate_I2}}">
        <button onclick="sendParam('turn_percent_rate_I2')">Set</button>
    </div>
    <div>
        <label>turn_percent_rate_O2:</label>
        <input type="number" id="turn_percent_rate_O2" min="0" max="100" value="{{turn_percent_rate_O2}}">
        <button onclick="sendParam('turn_percent_rate_O2')">Set</button>
    </div>
    <div>
        <label>turn_percent_rate_I3:</label>
        <input type="number" id="turn_percent_rate_I3" min="0" max="100" value="{{turn_percent_rate_I3}}">
        <button onclick="sendParam('turn_percent_rate_I3')">Set</button>
    </div>
    <div>
        <label>turn_percent_rate_O3:</label>
        <input type="number" id="turn_percent_rate_O3" min="0" max="100" value="{{turn_percent_rate_O3}}">
        <button onclick="sendParam('turn_percent_rate_O3')">Set</button>
    </div>

    <hr>

    <details> 

    <summary> (Wifi settings) </summary>

    <div>
        <label>SSID:</label>
        <input type="input" id="SSID" value="{{SSID}}">
        <button onclick="sendParam('SSID')">Set</button>
    </div>
    <div>
        <label>PASS:</label>
        <input type="password" id="PASS" value="{{PASS}}">
        <button onclick="sendParam('PASS')">Set</button>
    </div>

    </details>

    <script>
        function sendParam(paramName) {
            const input = document.getElementById(paramName);
            const value = (input.value);
            
            const url = `http://{{CURRENT_IPADDR}}/api?ev=config&name=${paramName}&val=${value}`;
            
            fetch(url, {
                method: 'POST'
            })
            .then(response => response.text())
            .then(data => {
                alert(data);
            })
            .catch(error => {
                alert('Error: ' + error.message);
            });
        }
    </script>
</body>
</html>
